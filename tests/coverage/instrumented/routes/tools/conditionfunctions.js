
var __cov__zR9cjn$yMLxhRcYerjhcw = (Function('return this'))();
if (!__cov__zR9cjn$yMLxhRcYerjhcw.__coverage__) { __cov__zR9cjn$yMLxhRcYerjhcw.__coverage__ = {}; }
__cov__zR9cjn$yMLxhRcYerjhcw = __cov__zR9cjn$yMLxhRcYerjhcw.__coverage__;
if (!(__cov__zR9cjn$yMLxhRcYerjhcw['routes/tools/conditionfunctions.js'])) {
   __cov__zR9cjn$yMLxhRcYerjhcw['routes/tools/conditionfunctions.js'] = {"path":"routes/tools/conditionfunctions.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":35},"end":{"line":4,"column":111}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":24},"end":{"line":9,"column":43}}},"3":{"name":"(anonymous_3)","line":57,"loc":{"start":{"line":57,"column":7},"end":{"line":57,"column":22}}},"4":{"name":"expandEvalWildCard","line":83,"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":51}}},"5":{"name":"replaceAsterix","line":110,"loc":{"start":{"line":110,"column":0},"end":{"line":110,"column":49}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":35}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":29}},"3":{"start":{"line":4,"column":0},"end":{"line":80,"column":2}},"4":{"start":{"line":5,"column":4},"end":{"line":5,"column":61}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":58}},"6":{"start":{"line":9,"column":4},"end":{"line":79,"column":7}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":25}},"8":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"9":{"start":{"line":12,"column":12},"end":{"line":12,"column":28}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":58}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":32}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":32}},"13":{"start":{"line":18,"column":8},"end":{"line":22,"column":10}},"14":{"start":{"line":23,"column":8},"end":{"line":49,"column":9}},"15":{"start":{"line":24,"column":12},"end":{"line":24,"column":62}},"16":{"start":{"line":25,"column":12},"end":{"line":48,"column":13}},"17":{"start":{"line":26,"column":16},"end":{"line":26,"column":37}},"18":{"start":{"line":27,"column":16},"end":{"line":27,"column":25}},"19":{"start":{"line":29,"column":16},"end":{"line":29,"column":91}},"20":{"start":{"line":30,"column":16},"end":{"line":46,"column":17}},"21":{"start":{"line":31,"column":20},"end":{"line":45,"column":21}},"22":{"start":{"line":32,"column":24},"end":{"line":44,"column":25}},"23":{"start":{"line":33,"column":28},"end":{"line":33,"column":47}},"24":{"start":{"line":34,"column":28},"end":{"line":41,"column":29}},"25":{"start":{"line":35,"column":32},"end":{"line":35,"column":102}},"26":{"start":{"line":36,"column":32},"end":{"line":36,"column":77}},"27":{"start":{"line":37,"column":32},"end":{"line":40,"column":35}},"28":{"start":{"line":42,"column":28},"end":{"line":42,"column":62}},"29":{"start":{"line":43,"column":28},"end":{"line":43,"column":47}},"30":{"start":{"line":47,"column":16},"end":{"line":47,"column":55}},"31":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"32":{"start":{"line":51,"column":12},"end":{"line":51,"column":61}},"33":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"34":{"start":{"line":54,"column":12},"end":{"line":54,"column":61}},"35":{"start":{"line":56,"column":8},"end":{"line":56,"column":17}},"36":{"start":{"line":58,"column":8},"end":{"line":58,"column":75}},"37":{"start":{"line":60,"column":8},"end":{"line":60,"column":32}},"38":{"start":{"line":61,"column":8},"end":{"line":76,"column":9}},"39":{"start":{"line":62,"column":12},"end":{"line":63,"column":79}},"40":{"start":{"line":64,"column":12},"end":{"line":66,"column":15}},"41":{"start":{"line":69,"column":12},"end":{"line":74,"column":14}},"42":{"start":{"line":75,"column":12},"end":{"line":75,"column":61}},"43":{"start":{"line":78,"column":8},"end":{"line":78,"column":26}},"44":{"start":{"line":83,"column":0},"end":{"line":107,"column":1}},"45":{"start":{"line":84,"column":4},"end":{"line":84,"column":38}},"46":{"start":{"line":85,"column":4},"end":{"line":88,"column":5}},"47":{"start":{"line":86,"column":8},"end":{"line":86,"column":30}},"48":{"start":{"line":87,"column":8},"end":{"line":87,"column":15}},"49":{"start":{"line":90,"column":4},"end":{"line":90,"column":73}},"50":{"start":{"line":91,"column":4},"end":{"line":94,"column":5}},"51":{"start":{"line":92,"column":8},"end":{"line":92,"column":30}},"52":{"start":{"line":93,"column":8},"end":{"line":93,"column":15}},"53":{"start":{"line":96,"column":4},"end":{"line":106,"column":5}},"54":{"start":{"line":97,"column":8},"end":{"line":99,"column":9}},"55":{"start":{"line":98,"column":12},"end":{"line":98,"column":21}},"56":{"start":{"line":100,"column":8},"end":{"line":100,"column":95}},"57":{"start":{"line":101,"column":8},"end":{"line":105,"column":9}},"58":{"start":{"line":102,"column":12},"end":{"line":102,"column":59}},"59":{"start":{"line":104,"column":12},"end":{"line":104,"column":32}},"60":{"start":{"line":110,"column":0},"end":{"line":121,"column":1}},"61":{"start":{"line":111,"column":4},"end":{"line":111,"column":43}},"62":{"start":{"line":112,"column":4},"end":{"line":114,"column":5}},"63":{"start":{"line":113,"column":8},"end":{"line":113,"column":26}},"64":{"start":{"line":115,"column":4},"end":{"line":115,"column":55}},"65":{"start":{"line":116,"column":4},"end":{"line":116,"column":56}},"66":{"start":{"line":117,"column":4},"end":{"line":119,"column":42}},"67":{"start":{"line":120,"column":4},"end":{"line":120,"column":55}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":11,"column":8}},{"start":{"line":11,"column":8},"end":{"line":11,"column":8}}]},"2":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":25,"column":12}},{"start":{"line":25,"column":12},"end":{"line":25,"column":12}}]},"3":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":16},"end":{"line":30,"column":16}},{"start":{"line":30,"column":16},"end":{"line":30,"column":16}}]},"4":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":20},"end":{"line":31,"column":20}},{"start":{"line":31,"column":20},"end":{"line":31,"column":20}}]},"5":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":25},"end":{"line":31,"column":69}},{"start":{"line":31,"column":75},"end":{"line":31,"column":112}}]},"6":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":24},"end":{"line":32,"column":24}},{"start":{"line":32,"column":24},"end":{"line":32,"column":24}}]},"7":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":31},"end":{"line":47,"column":43}},{"start":{"line":47,"column":47},"end":{"line":47,"column":54}}]},"8":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":50,"column":8}},{"start":{"line":50,"column":8},"end":{"line":50,"column":8}}]},"9":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":53,"column":8}},{"start":{"line":53,"column":8},"end":{"line":53,"column":8}}]},"10":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":8}},{"start":{"line":61,"column":8},"end":{"line":61,"column":8}}]},"11":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"12":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},{"start":{"line":91,"column":4},"end":{"line":91,"column":4}}]},"13":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":8}},{"start":{"line":97,"column":8},"end":{"line":97,"column":8}}]},"14":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":101,"column":8}},{"start":{"line":101,"column":8},"end":{"line":101,"column":8}}]},"15":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":4},"end":{"line":112,"column":4}},{"start":{"line":112,"column":4},"end":{"line":112,"column":4}}]}}};
}
__cov__zR9cjn$yMLxhRcYerjhcw = __cov__zR9cjn$yMLxhRcYerjhcw['routes/tools/conditionfunctions.js'];
__cov__zR9cjn$yMLxhRcYerjhcw.s['1']++;var utils=require('../utils.js');__cov__zR9cjn$yMLxhRcYerjhcw.s['2']++;var async=require('async');__cov__zR9cjn$yMLxhRcYerjhcw.s['3']++;exports.processWildcardCondition=function(bearertoken,build_id,alldocs,condition,ruleResponse,callback){__cov__zR9cjn$yMLxhRcYerjhcw.f['1']++;__cov__zR9cjn$yMLxhRcYerjhcw.s['4']++;utils.log().trace('processWildcardCondition ',build_id);__cov__zR9cjn$yMLxhRcYerjhcw.s['5']++;utils.copyRelevantConditions(ruleResponse,condition);__cov__zR9cjn$yMLxhRcYerjhcw.s['6']++;async.each(alldocs,function(adoc,cb){__cov__zR9cjn$yMLxhRcYerjhcw.f['2']++;__cov__zR9cjn$yMLxhRcYerjhcw.s['7']++;var retvals=[];__cov__zR9cjn$yMLxhRcYerjhcw.s['8']++;if(utils.doesDocumentSatisfyForClauses(adoc,condition)===false){__cov__zR9cjn$yMLxhRcYerjhcw.b['1'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['9']++;return cb(null);}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['1'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['10']++;expandEvalWildCard(adoc,condition.eval,retvals);__cov__zR9cjn$yMLxhRcYerjhcw.s['11']++;var conditionRet=true;__cov__zR9cjn$yMLxhRcYerjhcw.s['12']++;var hasFailures=false;__cov__zR9cjn$yMLxhRcYerjhcw.s['13']++;var condResponse={evaluation:'Failed',reportType:'Attributes',list:[]};__cov__zR9cjn$yMLxhRcYerjhcw.s['14']++;for(var i=0;i<retvals.length;i++){__cov__zR9cjn$yMLxhRcYerjhcw.s['15']++;var eResult=utils.traverseDoc(adoc,retvals[i]);__cov__zR9cjn$yMLxhRcYerjhcw.s['16']++;if(eResult===null){__cov__zR9cjn$yMLxhRcYerjhcw.b['2'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['17']++;conditionRet=false;__cov__zR9cjn$yMLxhRcYerjhcw.s['18']++;continue;}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['2'][1]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['19']++;var condRet=utils.checkCondition(eResult,condition.op,condition.value);__cov__zR9cjn$yMLxhRcYerjhcw.s['20']++;if(condRet===false){__cov__zR9cjn$yMLxhRcYerjhcw.b['3'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['21']++;if((__cov__zR9cjn$yMLxhRcYerjhcw.b['5'][0]++,typeof condition.reportType!=='undefined')&&(__cov__zR9cjn$yMLxhRcYerjhcw.b['5'][1]++,condition.reportType==='Attributes')){__cov__zR9cjn$yMLxhRcYerjhcw.b['4'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['22']++;if(typeof condition.reportAttributes!=='undefined'){__cov__zR9cjn$yMLxhRcYerjhcw.b['6'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['23']++;var attrArray=[];__cov__zR9cjn$yMLxhRcYerjhcw.s['24']++;for(var y=0;y<condition.reportAttributes.length;y++){__cov__zR9cjn$yMLxhRcYerjhcw.s['25']++;var aattr=replaceAsterix(condition.reportAttributes[y],retvals[i]);__cov__zR9cjn$yMLxhRcYerjhcw.s['26']++;var sresult=utils.traverseDoc(adoc,aattr);__cov__zR9cjn$yMLxhRcYerjhcw.s['27']++;attrArray.push({eval:aattr,actualValue:sresult});}__cov__zR9cjn$yMLxhRcYerjhcw.s['28']++;condResponse.list.push(attrArray);__cov__zR9cjn$yMLxhRcYerjhcw.s['29']++;hasFailures=true;}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['6'][1]++;}}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['4'][1]++;}}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['3'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['30']++;conditionRet=(__cov__zR9cjn$yMLxhRcYerjhcw.b['7'][0]++,conditionRet)&&(__cov__zR9cjn$yMLxhRcYerjhcw.b['7'][1]++,condRet);}}__cov__zR9cjn$yMLxhRcYerjhcw.s['31']++;if(conditionRet===true){__cov__zR9cjn$yMLxhRcYerjhcw.b['8'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['32']++;ruleResponse.conditionMatchedDocs.push(adoc._id);}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['8'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['33']++;if(hasFailures===true){__cov__zR9cjn$yMLxhRcYerjhcw.b['9'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['34']++;ruleResponse.functionResponse.push(condResponse);}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['9'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['35']++;cb(null);},function(err1){__cov__zR9cjn$yMLxhRcYerjhcw.f['3']++;__cov__zR9cjn$yMLxhRcYerjhcw.s['36']++;ruleResponse.conditionDocs.push(ruleResponse.conditionMatchedDocs);__cov__zR9cjn$yMLxhRcYerjhcw.s['37']++;var condResponse=null;__cov__zR9cjn$yMLxhRcYerjhcw.s['38']++;if(ruleResponse.conditionMatchedDocs.length===0){__cov__zR9cjn$yMLxhRcYerjhcw.b['10'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['39']++;var msg='Could not find matching '+condition.eval+': ['+condition.value+'] by itself or along with other conditions';__cov__zR9cjn$yMLxhRcYerjhcw.s['40']++;ruleResponse.failures.push({failed:msg});}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['10'][1]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['41']++;condResponse={eval:condition.eval,actualValue:condition.value,evaluation:'Success',reportType:'Basic'};__cov__zR9cjn$yMLxhRcYerjhcw.s['42']++;ruleResponse.functionResponse.push(condResponse);}__cov__zR9cjn$yMLxhRcYerjhcw.s['43']++;return callback();});};function expandEvalWildCard(doc,evalStr,retvals){__cov__zR9cjn$yMLxhRcYerjhcw.f['4']++;__cov__zR9cjn$yMLxhRcYerjhcw.s['45']++;var index=evalStr.indexOf('.*');__cov__zR9cjn$yMLxhRcYerjhcw.s['46']++;if(index===-1){__cov__zR9cjn$yMLxhRcYerjhcw.b['11'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['47']++;retvals.push(evalStr);__cov__zR9cjn$yMLxhRcYerjhcw.s['48']++;return;}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['11'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['49']++;var partialDoc=utils.traverseDoc(doc,evalStr.substring(0,index));__cov__zR9cjn$yMLxhRcYerjhcw.s['50']++;if(partialDoc===null){__cov__zR9cjn$yMLxhRcYerjhcw.b['12'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['51']++;retvals.push(evalStr);__cov__zR9cjn$yMLxhRcYerjhcw.s['52']++;return;}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['12'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['53']++;for(var i=0;i<partialDoc.length;i++){__cov__zR9cjn$yMLxhRcYerjhcw.s['54']++;if(Object.getOwnPropertyNames(partialDoc[i]).length===0){__cov__zR9cjn$yMLxhRcYerjhcw.b['13'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['55']++;continue;}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['13'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['56']++;var exstr=evalStr.substring(0,index)+'.'+i+'.'+evalStr.substring(index+3);__cov__zR9cjn$yMLxhRcYerjhcw.s['57']++;if(exstr.indexOf('.*')!==-1){__cov__zR9cjn$yMLxhRcYerjhcw.b['14'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['58']++;return expandEvalWildCard(doc,exstr,retvals);}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['14'][1]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['59']++;retvals.push(exstr);}}}function replaceAsterix(reportattr,currentattr){__cov__zR9cjn$yMLxhRcYerjhcw.f['5']++;__cov__zR9cjn$yMLxhRcYerjhcw.s['61']++;var rindex1=reportattr.indexOf('.*');__cov__zR9cjn$yMLxhRcYerjhcw.s['62']++;if(rindex1===-1){__cov__zR9cjn$yMLxhRcYerjhcw.b['15'][0]++;__cov__zR9cjn$yMLxhRcYerjhcw.s['63']++;return reportattr;}else{__cov__zR9cjn$yMLxhRcYerjhcw.b['15'][1]++;}__cov__zR9cjn$yMLxhRcYerjhcw.s['64']++;var rindex2=reportattr.indexOf('.',rindex1+1);__cov__zR9cjn$yMLxhRcYerjhcw.s['65']++;var cindex2=currentattr.indexOf('.',rindex1+1);__cov__zR9cjn$yMLxhRcYerjhcw.s['66']++;var newcurrentattr=reportattr.substring(0,rindex1)+'.'+currentattr.substring(rindex1+1,cindex2)+'.'+reportattr.substring(rindex2+1);__cov__zR9cjn$yMLxhRcYerjhcw.s['67']++;return replaceAsterix(newcurrentattr,currentattr);}
